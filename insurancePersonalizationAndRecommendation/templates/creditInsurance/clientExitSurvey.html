{% extends 'base.html' %}
{% block content %}
{% load static %}
        <div class="main">
            <div class="d-flex justify-content-end align-items-center topBar">
            </div>

            <div class="container-lg px-4">
                <div class="commonLayout notEligible exitPage my-4">
                    <div class="content">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="leftSec text-center">
                                    <div class="refreshBtn">
                                        <img src="{% static 'creditInsurance/images/reload.png' %}" alt="reload icon">
                                    </div>
                                    <form>
                                        <div class="mb-3">
                                            <h4>Let's stay in touch</h4>
                                            <p class="estimateValue mb-5">We appreciate your business, please contact us for additional information or to review your profile with an advisor near you.</p>
                                        </div>
            
                                        <div class="mb-3 exitReason text-start">
                                            <div class="row">
                                                <h4>Primary reason you declined assessment?</h4>
                                                <div class="col-md-6 col-12">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="exitAssessmentReason" id="laterDate" value="laterDate">
                                                        <label class="form-check-label" for="laterDate">
                                                            Lender to complete at a later date
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="exitAssessmentReason" id="think" value="think">
                                                        <label class="form-check-label" for="think">
                                                            Need to think about it
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="exitAssessmentReason" id="coverage" value="coverage">
                                                        <label class="form-check-label" for="coverage">
                                                            Already covered
                                                        </label>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-md-6 col-12">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="exitAssessmentReason" id="interested" value="interested">
                                                        <label class="form-check-label" for="interested">
                                                            Not interested
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="exitAssessmentReason" id="noTime" value="noTime">
                                                        <label class="form-check-label" for="noTime">
                                                            No time
                                                        </label>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                            <div class="row">
                                                <p class="obejctionData my-3"></p>
                                            </div>
                                        </div>
                                        
                                        <div class="closePage text-center">
                                            <button type="button" class="btn commonBtn">Exit</button>
                                            <div class="returnToCI">
                                                <a href="#">I changed my mind, return to dashboard tool</a>
                                            </div>
                                            <hr class="my-4">
                                            <div class="contactSec">
                                                <p class="mb-2 text-capitalize">Feel free to contact us with any questions</p>
                                                <div class="contactDetails d-flex justify-content-center">
                                                    <div class="mail mb-2">
                                                        <img src="{% static 'creditInsurance/images/mail.png' %}" alt="mail icon">
                                                        <a href="mailto:info_ci@cibc.com">info_ci@cibc.com</a>
                                                    </div>
                                                    <div class="call">
                                                        <img src="{% static 'creditInsurance/images/phone.png' %}" alt="call icon">
                                                        <span>1.877.448.6500</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>

                            <div class="col-md-4">
                                {% include 'creditInsurance/commonRelevantLinks.html' %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            // Exit Assessment - Show Objection as per radio button selection

            let exitAssessmentReason = document.querySelectorAll('.exitReason .form-check-input[name="exitAssessmentReason"]');
            let obejctionData = document.querySelector('.obejctionData');

            function reasonChange(e) {
                if(e.currentTarget.checked && e.currentTarget.value == "coverage") {
                    obejctionData.innerHTML = `
                    <p>Is your existing insurance enough to cover your debt and look after your family's immediate and long-term needs?</p>
                    <p>Does your existing insurance cover both you and your co-borrower/guarantor?</p>
                    <p class="mb-0">Have you considered if you leave your employer or lose your job, that any group coverage you have through your employer may terminate, meaning you and your family could be left without coverage?</p>`; 
                }
                else if(e.currentTarget.checked && e.currentTarget.value == "expensive") {
                    obejctionData.innerHTML = `
                    <p>I agree it is an additional expense. Without a plan, though, have you considered what would happen if you could no longer afford to make your regular payments on your [new borrowing product]</p>
            
                    <p>My main priority right now is to help you understand the value/importance of having a plan that protects your financial future, whether or not you choose to take CIBC's optional creditor's insurance</p> 
                    
                    <p class="mb-0">[Note: If a quote has not yet been provided] May I provide you with a quote to help you decide if any of these protection plans are within your budget?</p>`;
                }
                else if(e.currentTarget.checked && e.currentTarget.value == "noTime") {
                    obejctionData.innerHTML = `<p>Content Not Available</p>`;
                }
                else if(e.currentTarget.checked && e.currentTarget.value == "interested") {
                    obejctionData.innerHTML = `
                    <p>Ok, I appreciate that. My main priority right now is to help you understand the value/importance of having a plan that protects your financial future, whether or not you choose to take CIBC's optional creditor's insurance.</p>
                    
                    <p class="mb-0">The benefit of CIBC creditor insurance is that it can help to pay down or payoff your debt, leaving your other insurance/savings/assets available to support your family when you are not able to and preserve your family wealth.</p>`;
                }
                else if(e.currentTarget.checked && e.currentTarget.value == "think") {
                    obejctionData.innerHTML = `
                    <p>Ok, I appreciate that. My main priority right now is to help you understand the value/importance of having a plan that protects your financial future , whether or not you choose to take CIBC's optional creditor's insurance.</p>
                    
                    <p>I'll be happy to share some information for your consideration, [provide client with Creditor insurance product summary to review].</p>

                    <p class="mb-0">I would like you to take the time to research your protection needs. Look at the CIBC Creditor Insurance product summaries with the different coverages we offer, talk to friends or family and even do some research online on different types of insurance offerings out there. One of my main goals is to help you understand the value of protecting your future, whether or not you choose to take CIBC's optional insurance.</p>`;
                }
                else if(e.currentTarget.checked && e.currentTarget.value == "laterDate") {
                    obejctionData.innerHTML = `<p>Content Not Available</p>`;
                }
                obejctionData.style.display = "block";
            }

            exitAssessmentReason.forEach(reason => {
                reason.addEventListener('change', reasonChange);
            })
        </script>
{% endblock %}
